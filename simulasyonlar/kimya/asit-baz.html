<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pH Laboratuvarƒ± Pro | Teorim</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-app: #f8fafc;
            --bg-panel: #ffffff;
            --col-accent: #f97316;
            --border: #e2e8f0;
            --radius: 16px;
        }
        body { margin: 0; background: var(--bg-app); font-family: 'Inter', sans-serif; height: 100vh; display: flex; overflow: hidden; color: #1e293b; }
        
        aside { width: 340px; flex-shrink: 0; background: var(--bg-panel); border-right: 1px solid var(--border); padding: 24px; display: flex; flex-direction: column; gap: 20px; z-index: 30; box-shadow: 4px 0 20px rgba(0,0,0,0.02); overflow-y: auto; }
        
        .section-title { font-size: 0.7rem; font-weight: 800; color: #64748b; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; border-bottom: 1px solid var(--border); padding-bottom: 4px; }
        
        .tool-card { background: #ffffff; border: 1px solid var(--border); border-radius: var(--radius); padding: 14px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 12px; }
        .tool-card:hover { transform: translateY(-2px); border-color: var(--col-accent); }
        .tool-card.active { background: #fff7ed; border-color: var(--col-accent); ring: 2px solid var(--col-accent); }

        main { flex: 1; position: relative; background: #ffffff; overflow: hidden; }
        canvas { display: block; width: 100%; height: 100%; }

        .stats-card { margin-top: auto; background: #1e293b; color: white; padding: 20px; border-radius: var(--radius); }
        
        .indicator-panel { position: absolute; top: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; }
        .data-box { background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border: 1px solid var(--border); padding: 12px 20px; border-radius: 12px; font-size: 0.75rem; min-width: 180px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }

        /* --- ZIPLAYAN TELEFON UYARISI --- */
        #mobile-warning { display: none; position: fixed; inset: 0; background: #0f172a; color: white; z-index: 9999; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        @media (max-width: 768px) or (orientation: portrait) { #mobile-warning { display: flex; } }
        
        @keyframes phoneBounce {
            0%, 100% { transform: translateY(0) rotate(-10deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
        .phone-icon { animation: phoneBounce 1.5s infinite ease-in-out; }

        /* Geli≈ümi≈ü Turnusol */
        .litmus-holder { position: absolute; bottom: 10%; right: 50px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .litmus-paper { width: 35px; height: 140px; background: #e2e8f0; border-radius: 2px; border: 1px solid #cbd5e1; position: relative; transition: background 0.8s ease; overflow: hidden; }
        .litmus-paper::after { content: ""; position: absolute; bottom: 0; width: 100%; height: 50%; background: inherit; filter: brightness(0.9); }
    </style>
</head>
<body>

    <div id="mobile-warning">
        <div class="phone-icon mb-6">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
        </div>
        <h2 class="text-2xl font-bold mb-2">Deney ƒ∞√ßin Yan √áevirin</h2>
        <p class="text-slate-400 text-sm max-w-[250px]">Laboratuvar ara√ßlarƒ± ve hassas pH analizleri i√ßin geni≈ü ekran gereklidir.</p>
    </div>

<aside>
    <div class="flex items-center gap-3 mb-2">
        <a href="../../dersler/kimya.html" class="p-2 hover:bg-orange-100 rounded-full text-orange-600 transition">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7" /></svg>
        </a>
        <h1 class="font-bold text-xl text-slate-800">Asitler ve Bazlar</h1>
    </div>

    <div class="section-title">Aktif √á√∂zelti</div>
    <div class="space-y-2">
        <div class="tool-card active" onclick="app.setSolution('acid', this)">
            <span class="text-2xl">üß™</span>
            <div><div class="text-sm font-bold">Asit (HCl)</div><span class="text-[10px] text-red-500 font-bold">D√º≈ü√ºk pH</span></div>
        </div>
        <div class="tool-card" onclick="app.setSolution('base', this)">
            <span class="text-2xl">üßº</span>
            <div><div class="text-sm font-bold">Baz (NaOH)</div><span class="text-[10px] text-purple-500 font-bold">Y√ºksek pH</span></div>
        </div>
        <div class="tool-card" onclick="app.setSolution('water', this)">
            <span class="text-2xl">üíß</span>
            <div><div class="text-sm font-bold">Saf Su</div><span class="text-[10px] text-blue-500 font-bold">N√∂trle≈ütirici</span></div>
        </div>
    </div>

    <div class="section-title">Laboratuvar Kontrolleri</div>
    <div class="grid grid-cols-2 gap-2">
        <button onclick="app.addDrop()" class="bg-orange-500 text-white text-[11px] font-bold p-3 rounded-xl hover:bg-orange-600 active:scale-95 transition shadow-lg shadow-orange-500/20">DAMLA EKLE</button>
        <button onclick="app.reset()" class="bg-slate-100 text-slate-500 text-[11px] font-bold p-3 rounded-xl hover:bg-slate-200 transition">TEMƒ∞ZLE</button>
    </div>

    <div class="stats-card">
        <div class="flex justify-between items-center mb-1">
            <span class="text-orange-400 font-bold text-[10px] uppercase tracking-wider">Dijital pH Metre</span>
            <span class="text-4xl font-black font-mono text-orange-400" id="phValue">7.0</span>
        </div>
        <div class="flex h-1.5 rounded-full overflow-hidden my-4 bg-white/10" id="phScale">
            <div style="flex:1; background:#ef4444"></div><div style="flex:1; background:#f97316"></div><div style="flex:1; background:#eab308"></div>
            <div style="flex:1; background:#22c55e"></div><div style="flex:1; background:#06b6d4"></div><div style="flex:1; background:#3b82f6"></div><div style="flex:1; background:#a855f7"></div>
        </div>
        <p class="text-[11px] text-slate-400 font-medium leading-relaxed" id="statDesc">Deneye ba≈ülamak i√ßin bir damla ekleyin.</p>
    </div>
</aside>

<main id="container">
    <div class="indicator-panel">
        <div class="data-box">
            <div class="text-[9px] font-bold text-slate-400 uppercase mb-2 tracking-widest">Konsantrasyon Analizi</div>
            <div class="flex justify-between mb-1"><span>[H‚Å∫] Hidronyum:</span><span id="labelH" class="font-bold text-red-500">0</span></div>
            <div class="flex justify-between"><span>[OH‚Åª] Hidroksit:</span><span id="labelOH" class="font-bold text-purple-500">0</span></div>
        </div>
        <div class="data-box">
            <div class="text-[9px] font-bold text-slate-400 uppercase mb-1 tracking-widest">√á√∂zelti Durumu</div>
            <div id="solutionState" class="font-bold text-emerald-500">N√ñTR</div>
        </div>
    </div>

    <div class="litmus-holder">
        <div class="text-[9px] font-bold text-slate-400 uppercase tracking-tighter">Turnusol</div>
        <div id="litmusPaper" class="litmus-paper"></div>
    </div>

    <canvas id="simCanvas"></canvas>
</main>

<script>
const app = {
    canvas: document.getElementById('simCanvas'),
    ctx: null,
    particles: [],
    solutionType: 'acid',
    hCount: 0,
    ohCount: 0,
    waterCount: 100,
    ph: 7.0,

    init() {
        this.ctx = this.canvas.getContext('2d');
        this.resize();
        // Resize i≈üleminde resetleme yerine sadece canvasƒ± g√ºncelle
        window.addEventListener('resize', () => { 
            const parent = this.canvas.parentElement;
            this.canvas.width = parent.clientWidth;
            this.canvas.height = parent.clientHeight;
        });
        this.loop();
    },

    resize() {
        const parent = this.canvas.parentElement;
        this.canvas.width = parent.clientWidth;
        this.canvas.height = parent.clientHeight;
    },

    setSolution(type, el) {
        document.querySelectorAll('.tool-card').forEach(c => c.classList.remove('active'));
        el.classList.add('active');
        this.solutionType = type;
    },

    addDrop() {
        const cx = this.canvas.width / 2;
        const cy = this.canvas.height / 2;
        const type = this.solutionType === 'acid' ? 'H' : (this.solutionType === 'base' ? 'OH' : 'W');
        
        if(type === 'H') this.hCount += 8;
        else if(type === 'OH') this.ohCount += 8;
        else this.waterCount += 20;

        for(let i=0; i<8; i++) {
            this.particles.push({
                x: cx + (Math.random() - 0.5) * 12,
                y: cy - 220,
                vx: (Math.random() - 0.5) * 2,
                vy: 7 + Math.random() * 4,
                type: type,
                inLiquid: false
            });
        }
        this.updateStats();
    },

    updateStats() {
        const total = this.hCount + this.ohCount + this.waterCount;
        let diff = (this.hCount - this.ohCount) / (total / 40);
        this.ph = 7 - Math.max(-7, Math.min(7, diff));
        
        document.getElementById('phValue').innerText = this.ph.toFixed(1);
        document.getElementById('labelH').innerText = this.hCount;
        document.getElementById('labelOH').innerText = this.ohCount;
        
        const stateEl = document.getElementById('solutionState');
        const descEl = document.getElementById('statDesc');
        
        if (this.ph < 6.5) {
            stateEl.innerText = "ASƒ∞Dƒ∞K"; stateEl.className = "font-bold text-red-500";
            descEl.innerText = "Mavi turnusolu kƒ±rmƒ±zƒ±ya √ßevirir. Ek≈üidir.";
        } else if (this.ph > 7.5) {
            stateEl.innerText = "BAZƒ∞K"; stateEl.className = "font-bold text-purple-500";
            descEl.innerText = "Kƒ±rmƒ±zƒ± turnusolu maviye √ßevirir. Kaygandƒ±r.";
        } else {
            stateEl.innerText = "N√ñTR"; stateEl.className = "font-bold text-emerald-500";
            descEl.innerText = "ƒ∞yon dengesi korunuyor.";
        }
        
        const litmus = document.getElementById('litmusPaper');
        litmus.style.background = this.getLiquidColor(this.ph, 1);
    },

    reset() { this.particles = []; this.hCount = 0; this.ohCount = 0; this.waterCount = 100; this.updateStats(); },

    getLiquidColor(ph, alpha) {
        if (ph < 6) return `rgba(239, 68, 68, ${alpha})`;
        if (ph > 8) return `rgba(168, 85, 247, ${alpha})`;
        return `rgba(34, 197, 94, ${alpha})`;
    },

    draw() {
        const ctx = this.ctx;
        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        const cx = this.canvas.width / 2;
        const cy = this.canvas.height / 2 + 50;

        // Beher √áizimi
        ctx.strokeStyle = "#cbd5e1"; ctx.lineWidth = 6; ctx.lineCap = "round";
        ctx.beginPath();
        ctx.moveTo(cx - 110, cy - 160); ctx.lineTo(cx - 110, cy + 100);
        ctx.quadraticCurveTo(cx - 110, cy + 130, cx, cy + 130);
        ctx.quadraticCurveTo(cx + 110, cy + 130, cx + 110, cy + 100);
        ctx.lineTo(cx + 110, cy - 160);
        ctx.stroke();

        // Sƒ±vƒ± √áizimi
        ctx.fillStyle = this.getLiquidColor(this.ph, 0.25);
        ctx.beginPath();
        ctx.moveTo(cx - 104, cy - 20); ctx.lineTo(cx - 104, cy + 100);
        ctx.quadraticCurveTo(cx - 104, cy + 124, cx, cy + 124);
        ctx.quadraticCurveTo(cx + 104, cy + 124, cx + 104, cy + 100);
        ctx.lineTo(cx + 104, cy - 20);
        ctx.fill();

        // Par√ßacƒ±k Animasyonu
        this.particles.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy;
            if (!p.inLiquid && p.y >= cy - 20) { p.inLiquid = true; p.vy *= 0.15; p.vx *= 0.5; }
            if (p.inLiquid) {
                if (p.x < cx - 98 || p.x > cx + 98) p.vx *= -1;
                if (p.y > cy + 118 || p.y < cy - 20) p.vy *= -1;
                p.vx += (Math.random() - 0.5) * 0.2;
                p.vy += (Math.random() - 0.5) * 0.2;
            }
            ctx.fillStyle = p.type === 'H' ? "#ef4444" : (p.type === 'OH' ? "#a855f7" : "#3b82f6");
            ctx.beginPath(); ctx.arc(p.x, p.y, 4, 0, 7); ctx.fill();
            if(p.type !== 'W') {
                ctx.fillStyle = "white"; ctx.font = "bold 6px Arial"; ctx.textAlign = "center";
                ctx.fillText(p.type === 'H' ? "+" : "-", p.x, p.y + 2.5);
            }
        });
    },
    loop() { this.draw(); requestAnimationFrame(() => this.loop()); }
};
window.onload = () => app.init();
</script>
</body>
</html>
